// =============================================================================
// ðŸ“‹ ÐšÐžÐÐ¤Ð˜Ð“Ð£Ð ÐÐ¦Ð˜Ð¯ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«
// =============================================================================

/**
* Ð’ÑÐµ API ÐºÐ»ÑŽÑ‡Ð¸ Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
*/
const API_KEYS = {
Â Â Â  // Ð¢Ð¾ÐºÐµÐ½ Telegram Ð±Ð¾Ñ‚Ð°
Â Â Â  TELEGRAM_TOKEN: process.env.TELEGRAM_TOKEN || '8474413305:AAGUROU5GSKKTso_YtlwsguHzibBcpojLVI',
Â Â Â 
Â Â Â  // Roboflow API Ð´Ð»Ñ Ð´ÐµÑ‚ÐµÐºÑ†Ð¸Ð¸ ÑÐ»ÐµÐ´Ð¾Ð²
Â Â Â  ROBOFLOW_API_KEY: 'NeHOB854EyHkDbGGLE6G',
Â Â Â  ROBOFLOW_MODEL_URL: 'https://detect.roboflow.com/-zqyih/13',
Â Â Â 
Â Â Â  // Ð¯Ð½Ð´ÐµÐºÑ.Ð”Ð¸ÑÐº Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…
Â Â Â  YANDEX_DISK_TOKEN: process.env.YANDEX_DISK_TOKEN,
Â Â Â 
Â Â Â  // ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð²ÐµÐ±Ñ…ÑƒÐºÐ°
Â Â Â  WEBHOOK_URL: process.env.WEBHOOK_URL || 'https://shoe-print-bot.onrender.com/',
Â Â Â  PORT: process.env.PORT || 10000
};

/**
* ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Roboflow Ð´Ð»Ñ Ð´ÐµÑ‚ÐµÐºÑ†Ð¸Ð¸
*/
const ROBOFLOW_CONFIG = {
Â Â Â  confidence: 25,Â Â Â Â Â Â Â  // ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ Ð´ÐµÑ‚ÐµÐºÑ†Ð¸Ð¸
Â Â Â  overlap: 30,Â Â Â Â Â Â Â Â Â Â  // ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¿ÐµÑ€ÐµÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð±Ð¾ÐºÑÐ¾Ð²
Â Â Â  format: 'json',Â Â Â Â Â Â Â  // Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð°
Â Â Â  timeout: 30000,Â Â Â Â Â Â Â  // Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°
Â Â Â  maxRetries: 3Â Â Â Â Â Â Â Â Â  // ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº
};

/**
* ÐœÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
*/
const MODEL_METADATA = {
Â Â Â  name: "Shoe Print Detective",
Â Â Â  version: "dynamic",
Â Â Â  status: "ACTIVE_DEVELOPMENT",
Â Â Â  accuracy: "ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ð¸",
Â Â Â  dataset: "Ð‘Ð°Ð·Ð° Ñ€Ð°ÑÑˆÐ¸Ñ€ÑÐµÑ‚ÑÑ",
Â Â Â  trained: "ÐŸÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ",
Â Â Â  confidence: "Ð—ÐÐ’Ð˜Ð¡Ð˜Ð¢ ÐžÐ¢ ÐšÐÐ§Ð•Ð¡Ð¢Ð’Ð Ð¡Ð›Ð•Ð”Ð",
Â Â Â 
Â Â Â  limitations: [
Â Â Â Â Â Â Â  "ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð² Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ",
Â Â Â Â Â Â Â  "Ð¢Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ Ð²Ð°Ñ€ÑŒÐ¸Ñ€ÑƒÐµÑ‚ÑÑ Ð¾Ñ‚ 30% Ð´Ð¾ 50%",
Â Â Â Â Â Â Â  "Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¾Ñ‡ÐµÐ½ÑŒ Ñ‡ÐµÑ‚ÐºÐ¸Ðµ ÑÐ»ÐµÐ´Ñ‹ Ð´Ð»Ñ Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ÑÑ‚Ð¸",
Â Â Â Â Â Â Â  "Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ ÑƒÐ»ÑƒÑ‡ÑˆÐ°ÐµÑ‚ÑÑ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…",
Â Â Â Â Â Â Â  "ÐœÐ¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð¼ÐµÐ»ÐºÐ¸Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸"
Â Â Â  ],
Â Â Â 
Â Â Â  recommendations: [
Â Â Â Â Â Â Â  "Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð´ Ð¿Ñ€ÑÐ¼Ñ‹Ð¼ ÑƒÐ³Ð»Ð¾Ð¼",
Â Â Â Â Â Â Â  "Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÑÐ²ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð±ÐµÐ· Ñ‚ÐµÐ½ÐµÐ¹",
Â Â Â Â Â Â Â  "ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ñ‡ÐµÑ‚ÐºÐ¾ÑÑ‚ÑŒ ÑÐ½Ð¸Ð¼ÐºÐ°",
Â Â Â Â Â Â Â  "ÐšÑ€ÑƒÐ¿Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ ÑÐ»ÐµÐ´Ð°",
Â Â Â Â Â Â Â  "ÐšÐ¾Ð½Ñ‚Ñ€Ð°ÑÑ‚Ð½Ñ‹Ð¹ Ñ„Ð¾Ð½"
Â Â Â  ]
};

/**
* Ð¦Ð²ÐµÑ‚Ð° Ð´Ð»Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ€Ð°Ð·Ð½Ñ‹Ñ… ÐºÐ»Ð°ÑÑÐ¾Ð² Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð²
*/
const VISUALIZATION_COLORS = {
Â Â Â  // ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ»Ð°ÑÑÑ‹ ÑÐ»ÐµÐ´Ð¾Ð²
Â Â Â  'Outline-trail': 'rgba(148, 0, 211, 0.8)',Â Â Â Â Â  // Ð¤Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹ - ÐºÐ¾Ð½Ñ‚ÑƒÑ€
Â Â Â  'shoe-protector': 'rgba(64, 224, 208, 0.7)',Â Â Â  // Ð‘Ð¸Ñ€ÑŽÐ·Ð¾Ð²Ñ‹Ð¹ - Ð¿Ñ€Ð¾Ñ‚ÐµÐºÑ‚Ð¾Ñ€
Â Â Â  'Heel': 'rgba(0, 0, 255, 0.6)',Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // Ð¡Ð¸Ð½Ð¸Ð¹ - Ð¿ÑÑ‚ÐºÐ°
Â Â Â  'Toe': 'rgba(30, 144, 255, 0.6)',Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // Ð“Ð¾Ð»ÑƒÐ±Ð¾Ð¹ - Ð¼Ñ‹ÑÐ¾Ðº
Â Â Â 
Â Â Â  // Ð¦Ð²ÐµÑ‚Ð° Ð´Ð»Ñ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ð¹
Â Â Â  match: 'rgba(0, 255, 0, 0.6)',Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // Ð—ÐµÐ»ÐµÐ½Ñ‹Ð¹ - ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ
Â Â Â  difference: 'rgba(255, 0, 0, 0.6)',Â Â Â Â Â Â Â Â Â Â Â Â  // ÐšÑ€Ð°ÑÐ½Ñ‹Ð¹ - Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð¸Ñ
Â Â Â  missing: 'rgba(255, 255, 0, 0.6)',Â Â Â Â Â Â Â Â Â Â Â Â Â  // Ð–ÐµÐ»Ñ‚Ñ‹Ð¹ - Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ
Â Â Â  partial: 'rgba(255, 165, 0, 0.6)',Â Â Â Â Â Â Â Â Â Â Â Â Â  // ÐžÑ€Ð°Ð½Ð¶ÐµÐ²Ñ‹Ð¹ - Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ñ‹Ðµ
Â Â Â  outline: 'rgba(0, 0, 255, 0.8)'Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  // Ð¡Ð¸Ð½Ð¸Ð¹ - ÐºÐ¾Ð½Ñ‚ÑƒÑ€
};

/**
* ÐŸÐ¾Ñ€Ð¾Ð³Ð¸ Ð¸ Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
*/
const THRESHOLDS = {
Â Â Â  // ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ
Â Â Â  MIN_FOOTPRINTS_FOR_ASSEMBLY: 2,
Â Â Â  MIN_FOOTPRINTS_FOR_GROUPS: 3,
Â Â Â  MIN_PREDICTIONS_FOR_ANALYSIS: 1,
Â Â Â 
Â Â Â  // ÐŸÐ¾Ñ€Ð¾Ð³Ð¸ ÑÑ…Ð¾Ð¶ÐµÑÑ‚Ð¸
Â Â Â  SIMILARITY_THRESHOLD: 0.6,
Â Â Â  HIGH_SIMILARITY: 70,
Â Â Â  MEDIUM_SIMILARITY: 50,
Â Â Â  LOW_SIMILARITY: 30,
Â Â Â 
Â Â Â  // Ð›Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
Â Â Â  MAX_PREDICTIONS_FOR_VIZ: 50,
Â Â Â  MAX_FOOTPRINTS_PER_SESSION: 100,
Â Â Â  MAX_COMPARISONS_PER_SESSION: 500,
Â Â Â 
Â Â Â  // Ð“ÐµÐ¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ð¾Ñ€Ð¾Ð³Ð¸
Â Â Â  MIN_AREA_FOR_DETECTION: 100,
Â Â Â  MAX_ANGLE_FOR_NORMALIZATION: 45,
Â Â Â  MIN_CONFIDENCE_FOR_DETECTION: 0.25
};

/**
* ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…
*/
const STORAGE_CONFIG = {
Â Â Â  dataFile: 'trail_sessions.json',
Â Â Â  backupInterval: 5 * 60 * 1000, // 5 Ð¼Ð¸Ð½ÑƒÑ‚
Â Â Â  statsBackupInterval: 10 * 60 * 1000, // 10 Ð¼Ð¸Ð½ÑƒÑ‚
Â Â Â  maxBackupFiles: 10
};

/**
* Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¸ Ñ‚ÐµÐºÑÑ‚Ñ‹ Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ°
*/
const MESSAGES = {
Â Â Â  errors: {
Â Â Â Â Â Â Â  NO_ACTIVE_SESSION: 'âŒ ÐÐºÑ‚Ð¸Ð²Ð½Ð°Ñ ÑÐµÑÑÐ¸Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°',
Â Â Â Â Â Â Â  NOT_ENOUGH_FOOTPRINTS: 'âŒ ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÐ»ÐµÐ´Ð¾Ð² Ð´Ð»Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸',
Â Â Â Â Â Â Â  ANALYSIS_FAILED: 'âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ',
Â Â Â Â Â Â Â  COMPARISON_FAILED: 'âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ñ ÑÐ»ÐµÐ´Ð¾Ð²',
Â Â Â Â Â Â Â  SAVE_FAILED: 'âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…'
Â Â Â  },
Â Â Â 
Â Â Â  success: {
Â Â Â Â Â Â Â  SESSION_STARTED: 'ðŸ•µï¸â€â™‚ï¸ Ð¡ÐµÑÑÐ¸Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð°',
Â Â Â Â Â Â Â  FOOTPRINT_ADDED: 'âœ… Ð¡Ð»ÐµÐ´ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² ÑÐµÑÑÐ¸ÑŽ',
Â Â Â Â Â Â Â  MODEL_ASSEMBLED: 'ðŸ§© ÐœÐ¾Ð´ÐµÐ»ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð±Ñ€Ð°Ð½Ð°',
Â Â Â Â Â Â Â  DATA_SAVED: 'ðŸ’¾ Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹'
Â Â Â  },
Â Â Â 
Â Â Â  warnings: {
Â Â Â Â Â Â Â  LOW_CONFIDENCE: 'âš ï¸ ÐÐ¸Ð·ÐºÐ°Ñ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°',
Â Â Â Â Â Â Â  PERSPECTIVE_ISSUES: 'âš ï¸ ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ Ð¸ÑÐºÐ°Ð¶ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÑÐ¿ÐµÐºÑ‚Ð¸Ð²Ñ‹',
Â Â Â Â Â Â Â  ROTATION_DETECTED: 'âš ï¸ ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚ ÑÐ»ÐµÐ´Ð°'
Â Â Â  }
};

/**
* ÐšÐ»Ð°ÑÑÑ‹ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² Ð´Ð»Ñ Ð´ÐµÑ‚ÐµÐºÑ†Ð¸Ð¸
*/
const DETECTION_CLASSES = {
Â Â Â  OUTLINE: 'Outline-trail',
Â Â Â  PROTECTOR: 'shoe-protector',
Â Â Â  HEEL: 'Heel',
Â Â Â  TOE: 'Toe',
Â Â Â 
Â Â Â  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ ÐºÐ»Ð°ÑÑ ÐºÐ¾Ð½Ñ‚ÑƒÑ€Ð¾Ð¼
Â Â Â  isOutline: (className) => className === 'Outline-trail' || className.includes('Outline'),
Â Â Â 
Â Â Â  // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ ÐºÐ»Ð°ÑÑ Ð´ÐµÑ‚Ð°Ð»ÑŒÑŽ Ð¿Ñ€Ð¾Ñ‚ÐµÐºÑ‚Ð¾Ñ€Ð°
Â Â Â  isProtector: (className) => className === 'shoe-protector',
Â Â Â 
Â Â Â  // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… ÐºÐ»Ð°ÑÑÐ¾Ð²
Â Â Â  getAll: () => ['Outline-trail', 'shoe-protector', 'Heel', 'Toe']
};

module.exports = {
Â Â Â  API_KEYS,
Â Â Â  ROBOFLOW_CONFIG,
Â Â Â  MODEL_METADATA,
Â Â Â  VISUALIZATION_COLORS,
Â Â Â  THRESHOLDS,
Â Â Â  STORAGE_CONFIG,
Â Â Â  MESSAGES,
Â Â Â  DETECTION_CLASSES
};
